#include "common.h"

struct v2p
{
	half4 color : COLOR0; // rgb. intensity, for SM3 - tonemap prescaled
	half3 tc0 : TEXCOORD0;
	half2 tc1 : TEXCOORD1;
};

uniform sampler2D s_clouds0 : register(s0);
uniform sampler2D s_clouds1 : register(s1);

//////////////////////////////////////////////////////////////////////////////////////////
// Pixel
half4 main(v2p I) : COLOR
{
	half4 s0 = tex2D(s_clouds0, I.tc0.xy);
	half4 s1 = tex2D(s_clouds1, I.tc1.xy);

	half4 final = I.color * (s0 + s1);
	final.xyz *= I.tc0.z / 2.0f * 3.0f;

	return final;
}
